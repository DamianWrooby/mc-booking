<app-layout>
	<div class="w-full max-w-md flex flex-col gap-4">
		<h1 class="text-2xl font-bold text-center mb-2">Ustaw nowe hasło</h1>

		@if (isValidSession()) {
			<p class="text-surface-500 dark:text-surface-400 text-center mb-4">
				Wprowadź nowe hasło dla swojego konta.
			</p>

			<p-iftalabel>
				<input
					pInputText
					id="password"
					type="password"
					[ngModel]="password()"
					(ngModelChange)="password.set($event)"
					autocomplete="new-password"
					class="w-full"
				/>
				<label for="password">Nowe hasło</label>
			</p-iftalabel>

			@if (showMinLengthError()) {
				<p-message severity="error" text="Hasło musi mieć co najmniej 6 znaków" />
			}

			<p-iftalabel>
				<input
					pInputText
					id="confirmPassword"
					type="password"
					[ngModel]="confirmPassword()"
					(ngModelChange)="confirmPassword.set($event)"
					autocomplete="new-password"
					class="w-full"
				/>
				<label for="confirmPassword">Potwierdź hasło</label>
			</p-iftalabel>

			@if (showMismatchError()) {
				<p-message severity="error" text="Hasła nie są identyczne" />
			}

			<p-button
				label="Zmień hasło"
				[loading]="loading()"
				[disabled]="!canSubmit()"
				(onClick)="submit()"
				styleClass="w-full mt-2"
			/>
		} @else {
			<div class="text-center">
				<p class="text-surface-500 dark:text-surface-400 mb-4">
					Link do resetowania hasła wygasł lub jest nieprawidłowy.
				</p>
				<a routerLink="/forgot-password" class="text-primary hover:underline">
					Wyślij nowy link
				</a>
			</div>
		}
	</div>
</app-layout>
